<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cursor AI Analytics - Informe de Productividad</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: white;
            padding: 50px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            animation: rotate 20s linear infinite;
        }

        @keyframes rotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .header h1 {
            position: relative;
            z-index: 2;
            color: white;
            font-size: 2.5em;
            margin-bottom: 10px;
            font-weight: 700;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        .header .subtitle {
            color: rgba(255, 255, 255, 0.9);
            font-size: 1.2em;
            margin-bottom: 20px;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.2);
        }
        
        .period {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            padding: 10px 20px;
            border-radius: 25px;
            display: inline-block;
            font-weight: 600;
        }
        
        .kpi-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 25px;
            margin-bottom: 40px;
        }
        
        .kpi-card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 30px;
            text-align: center;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border-left: 5px solid #3498db;
        }
        
        .kpi-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.2);
        }
        
        .kpi-card.success { border-left-color: #27ae60; }
        .kpi-card.danger { border-left-color: #e74c3c; }
        .kpi-card.info { border-left-color: #3498db; }
        .kpi-card.primary { border-left-color: #9b59b6; }
        .kpi-card.secondary { border-left-color: #f39c12; }
        .kpi-card.warning { border-left-color: #f1c40f; }
        
        .kpi-value {
            font-size: 3em;
            font-weight: 800;
            color: #2c3e50;
            margin-bottom: 10px;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        .kpi-label {
            font-size: 1.1em;
            color: #7f8c8d;
            font-weight: 600;
            margin-bottom: 15px;
        }
        
        .kpi-description {
            font-size: 0.9em;
            color: #95a5a6;
            font-style: italic;
            border-top: 1px solid #ecf0f1;
            padding-top: 15px;
            line-height: 1.5;
        }
        
        .section {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }
        
        .section-title {
            color: #2c3e50;
            font-size: 1.8em;
            font-weight: 700;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .chart-container {
            position: relative;
            height: 400px;
            margin-bottom: 20px;
        }
        
        .chart-description {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            font-size: 0.9em;
            color: #6c757d;
            font-style: italic;
            border-left: 4px solid #3498db;
        }
        
        .grid-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(450px, 1fr));
            gap: 30px;
            margin-bottom: 30px;
            max-width: 100%;
        }
        
        /* Limitar a máximo 2 columnas */
        .grid-container > * {
            max-width: 100%;
        }
        
        @supports (grid-template-columns: subgrid) {
            .grid-container {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        /* Para pantallas muy grandes, forzar máximo 2 columnas */
        @media (min-width: 1200px) {
            .grid-container {
                grid-template-columns: repeat(2, 1fr);
                max-width: 1200px;
                margin-left: auto;
                margin-right: auto;
            }
        }
        
        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }
        
        .data-table th,
        .data-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        
        .data-table th {
            background-color: #3498db;
            color: white;
            font-weight: 600;
        }
        
        .data-table tr:nth-child(even) {
            background-color: #f8f9fa;
        }
        
        .data-table tr:hover {
            background-color: #e8f4fd;
        }
        
        .badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 0.9em;
            color: white;
            font-weight: 500;
        }
        
        .badge.java { background-color: #b07219; }
        .badge.py { background-color: #3572A5; }
        .badge.ts { background-color: #007ACC; }
        .badge.tsx { background-color: #007ACC; }
        .badge.js { background-color: #f7df1e; color: #333; }
        .badge.html { background-color: #e34c26; }
        .badge.css { background-color: #563d7c; }
        .badge.scss { background-color: #cf649a; }
        .badge.json { background-color: #e83e8c; }
        .badge.sql { background-color: #4479A1; }
        .badge.sqlx { background-color: #4479A1; }
        .badge.md { background-color: #083fa1; }
        .badge.yml { background-color: #cb171e; }
        .badge.yaml { background-color: #cb171e; }
        .badge.xml { background-color: #0060ac; }
        .badge.vue { background-color: #4fc08d; }
        .badge.jsp { background-color: #b07219; }
        .badge.jspf { background-color: #b07219; }
        .badge.ipynb { background-color: #3572A5; }
        .badge.tf { background-color: #5c4ee5; }
        .badge.tfvars { background-color: #5c4ee5; }
        .badge.gradle { background-color: #02303a; }
        .badge.properties { background-color: #2e8b57; }
        .badge.txt { background-color: #89e051; color: #333; }
        .badge.svg { background-color: #ff9900; }
        .badge.csv { background-color: #239909; }
        .badge.conf { background-color: #6c757d; }
        .badge.xsl { background-color: #eb8500; }
        .badge.tag { background-color: #e34c26; }
        .badge.mdc { background-color: #083fa1; }
        .badge.gcloudignore { background-color: #4285f4; }
        .badge.default { background-color: #6c757d; }
        
        .insights-section {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }
        
        .insight-item {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 15px;
            border-left: 4px solid #27ae60;
        }
        
        .insight-item h4 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 1.2em;
        }
        
        .insight-item p {
            color: #6c757d;
            line-height: 1.6;
        }

        .content {
            padding: 40px;
        }

        .inactive-users {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 10px;
            padding: 20px;
            margin: 30px 0;
        }

        .inactive-users h4 {
            color: #856404;
            margin-bottom: 15px;
        }

        .inactive-users ul {
            columns: 2;
            column-gap: 30px;
            margin: 15px 0;
        }

        .inactive-users li {
            margin-bottom: 5px;
            break-inside: avoid;
        }

        .recommendations {
            background: linear-gradient(135deg, #e8f5e8 0%, #f0f8f0 100%);
            padding: 30px;
            border-radius: 15px;
            margin: 30px 0;
            border-left: 5px solid #28a745;
        }

        .recommendations h3 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.6em;
        }

        .recommendation-list {
            list-style: none;
        }

        .recommendation-list li {
            margin-bottom: 15px;
            padding-left: 20px;
            position: relative;
        }

        .recommendation-list li:before {
            content: "✓";
            position: absolute;
            left: 0;
            color: #28a745;
            font-weight: bold;
        }

        @media (max-width: 768px) {
            .kpi-grid {
                grid-template-columns: 1fr;
            }
            
            .grid-container {
                grid-template-columns: 1fr;
            }
            
            .inactive-users ul {
                columns: 1;
            }
        }

        @media (max-width: 1024px) and (min-width: 769px) {
            .kpi-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 1200px) and (min-width: 1025px) {
            .kpi-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        /* Menú desplegable */
        .nav-menu {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
        }

        .menu-toggle {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            cursor: pointer;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 24px;
        }

        .menu-toggle:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 25px rgba(0, 0, 0, 0.4);
        }

        .menu-toggle.active {
            transform: rotate(90deg);
        }

        .menu-dropdown {
            position: absolute;
            top: 70px;
            right: 0;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            min-width: 250px;
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: all 0.3s ease;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .menu-dropdown.active {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .menu-dropdown ul {
            list-style: none;
            margin: 0;
            padding: 15px 0;
        }

        .menu-dropdown li {
            margin: 0;
        }

        .menu-dropdown a {
            color: #2c3e50;
            text-decoration: none;
            padding: 12px 20px;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 15px;
            font-weight: 500;
            transition: all 0.2s ease;
            border-left: 3px solid transparent;
        }

        .menu-dropdown a:hover {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-left-color: #fff;
            transform: translateX(5px);
        }

        .menu-dropdown a:active {
            transform: translateX(3px);
        }

        /* Overlay para cerrar el menú */
        .menu-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.1);
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            z-index: 999;
        }

        .menu-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        @media (max-width: 768px) {
            .nav-menu {
                top: 15px;
                right: 15px;
            }
            
            .menu-toggle {
                width: 50px;
                height: 50px;
                font-size: 20px;
            }
            
            .menu-dropdown {
                top: 60px;
                min-width: 200px;
            }
            
            .menu-dropdown a {
                padding: 10px 15px;
                font-size: 14px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>📊 Análisis de Uso de Cursor AI</h1>
            <p class="subtitle">Informe Integral de Adopción y Productividad</p>
            <div class="period">📅 Período: {{PERIODO_INICIO}} - {{PERIODO_FIN}}</div>
        </div>

        <!-- Menú desplegable -->
        <nav class="nav-menu">
            <button class="menu-toggle" id="menuToggle">
                ☰
            </button>
            <div class="menu-dropdown" id="menuDropdown">
                <ul>
                    <li><a href="#kpis">📊 KPIs</a></li>
                    <li><a href="#evolucion-temporal">📈 Evolución Temporal</a></li>
                    <li><a href="#evolucion-tabs">🔄 Evolución Tabs</a></li>
                    <li><a href="#analisis-equipos">👥 Análisis Equipos</a></li>
                    <li><a href="#tecnologias">💡 Tecnologías</a></li>
                    <li><a href="#modelos">🧠 Modelos IA</a></li>
                    <li><a href="#usuarios-inactivos">⚠️ Usuarios Inactivos</a></li>
                    <li><a href="#resumen-ejecutivo">🎯 Resumen Ejecutivo</a></li>
                    <li><a href="#recomendaciones">✅ Recomendaciones</a></li>
                </ul>
            </div>
        </nav>
        
        <!-- Overlay para cerrar el menú -->
        <div class="menu-overlay" id="menuOverlay"></div>

        <div class="content">
            <!-- KPIs Principales -->
            <div id="kpis" class="kpi-grid">
                <!-- Primera fila: Métricas de Líneas y Tabs -->
                <div class="kpi-card primary">
                    <div class="kpi-value">{{LINEAS_ACEPTADAS}}</div>
                    <div class="kpi-label">💻 Líneas de Código IA</div>
                    <div class="kpi-description">
                        <strong>Impacto directo:</strong> Total de líneas de código aceptadas generadas por IA. Representa el volumen de código producido con asistencia de IA.
                    </div>
                </div>
                
                <div class="kpi-card info">
                    <div class="kpi-value">{{TASA_ACEPTACION}}%</div>
                    <div class="kpi-label">✅ % Aceptación Líneas</div>
                    <div class="kpi-description">
                        <strong>Calidad alta:</strong> {{TASA_ACEPTACION}}% de las líneas sugeridas por IA son aceptadas, indicando relevancia y precisión en las propuestas de código.
                    </div>
                </div>
                
                <div class="kpi-card secondary">
                    <div class="kpi-value">{{TABS_ACEPTADOS}}</div>
                    <div class="kpi-label">🔄 Tabs Aceptados</div>
                    <div class="kpi-description">
                        <strong>Autocompletado:</strong> Total de sugerencias de autocompletado aceptadas. Muestra el uso de asistencia instantánea durante la escritura.
                    </div>
                </div>
                
                <div class="kpi-card warning">
                    <div class="kpi-value">{{TASA_ACEPTACION_TABS}}%</div>
                    <div class="kpi-label">⚡ % Aceptación Tabs</div>
                    <div class="kpi-description">
                        <strong>Efectividad selectiva:</strong> {{TASA_ACEPTACION_TABS}}% de tabs aceptados vs líneas ({{TASA_ACEPTACION}}%) muestra diferentes patrones de uso según el contexto.
                    </div>
                </div>
                
                <!-- Segunda fila: Métricas generales -->
                <div class="kpi-card info">
                    <div class="kpi-value">{{PETICIONES_TOTALES}}</div>
                    <div class="kpi-label">🤖 Peticiones Totales</div>
                    <div class="kpi-description">
                        <strong>Uso intensivo:</strong> Interacciones totales con modelos de IA, demostrando integración profunda en el flujo de trabajo.
                    </div>
                </div>
                
                <div class="kpi-card warning">
                    <div class="kpi-value">{{PROMEDIO_LINEAS}}</div>
                    <div class="kpi-label">📈 Promedio Líneas/Usuario</div>
                    <div class="kpi-description">
                        <strong>Productividad individual:</strong> Media de líneas aceptadas por usuario activo, evidenciando impacto significativo por desarrollador.
                    </div>
                </div>
                
                <div class="kpi-card success">
                    <div class="kpi-value">{{TASA_ADOPCION}}%</div>
                    <div class="kpi-label">🎯 Tasa de Adopción</div>
                    <div class="kpi-description">
                        <strong>Excelente adopción:</strong> {{USUARIOS_ACTIVOS}} de {{TOTAL_USUARIOS}} usuarios han utilizado activamente Cursor AI. Supera ampliamente los estándares del sector (30-40%).
                    </div>
                </div>
                
                <div class="kpi-card danger">
                    <div class="kpi-value">{{USUARIOS_INACTIVOS}}</div>
                    <div class="kpi-label">⚠️ Usuarios Inactivos</div>
                    <div class="kpi-description">
                        <strong>Oportunidad de mejora:</strong> Usuarios que no han utilizado la herramienta. Requieren atención personalizada.
                    </div>
                </div>
            </div>



            <!-- Gráfico de Evolución Temporal - Ancho completo -->
            <div id="evolucion-temporal" class="section">
                <h3 class="section-title">📈 Evolución Temporal</h3>
                <div class="chart-container">
                    <canvas id="evolutionChart"></canvas>
                </div>
                <div class="chart-description">
                    <strong>Tendencia positiva:</strong> La evolución muestra un crecimiento sostenido en el uso, con picos de adopción que evidencian la integración natural de la herramienta en los procesos de desarrollo. Se incluyen tanto líneas aceptadas como sugeridas para mostrar el volumen total de interacción con la IA.
                </div>
            </div>

            <!-- Gráfico de Evolución de Tabs - Ancho completo -->
            <div id="evolucion-tabs" class="section">
                <h3 class="section-title">🔄 Evolución de Uso de Tabs</h3>
                <div class="chart-container">
                    <canvas id="tabsChart"></canvas>
                </div>
                <div class="chart-description">
                    <strong>Uso de autocompletado:</strong> Los tabs representan las sugerencias de autocompletado que aparecen mientras se escribe. La relación entre tabs mostrados y aceptados indica la efectividad de las sugerencias automáticas.
                </div>
            </div>

            <!-- Análisis para Equipos -->
            <div id="analisis-equipos" class="section">
                <h2 class="section-title">👥 Análisis para Equipos de Desarrollo</h2>
                <p style="text-align: center; margin-bottom: 30px; color: #6c757d;">
                    Detalles de uso para compartir conocimiento, identificar patrones y celebrar logros colectivos.
                </p>
                
                <div class="grid-container">
                    <div>
                        <h3>🏆 Top 10 - Campeones de Productividad</h3>
                        <p>Usuarios que más líneas de código han aceptado de la IA:</p>
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Usuario</th>
                                    <th>Líneas Aceptadas</th>
                                </tr>
                            </thead>
                            <tbody>
                                {{TOP_PRODUCTIVIDAD}}
                            </tbody>
                        </table>
                    </div>
                    
                    <div>
                        <h3>🚀 Top 10 - Power Users (Peticiones)</h3>
                        <p>Usuarios con mayor interacción con modelos de IA:</p>
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Usuario</th>
                                    <th>Total Peticiones</th>
                                </tr>
                            </thead>
                            <tbody>
                                {{TOP_PETICIONES}}
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Tabla de Tecnologías (sola) -->
                <div id="tecnologias" style="margin: 30px 0;">
                    <h3>💡 Tecnologías Más Utilizadas</h3>
                    <p>Lenguajes donde más impacto tiene la IA:</p>
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Extensión</th>
                                <th>Líneas Aceptadas</th>
                                <th>Usuarios</th>
                            </tr>
                        </thead>
                        <tbody>
                            {{TECNOLOGIAS_UTILIZADAS}}
                        </tbody>
                    </table>
                </div>

                <!-- Modelos de IA y Versiones -->
                <div class="grid-container">
                    <div id="modelos" class="section">
                        <h3 class="section-title">🧠 Modelos de IA Utilizados</h3>
                        <div class="chart-container">
                            <canvas id="modelsChart"></canvas>
                        </div>
                        <div class="chart-description">
                            <strong>Diversidad estratégica:</strong> Los equipos experimentan con diferentes modelos según las necesidades, optimizando el uso de cada uno para diferentes tipos de tareas.
                        </div>
                    </div>
                    
                    <div>
                        <h3>📱 Versiones de Cliente Utilizadas</h3>
                        <p>Distribución de versiones de Cursor:</p>
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Versión</th>
                                    <th>Días-Usuario</th>
                                    <th>% Uso</th>
                                </tr>
                            </thead>
                            <tbody>
                                {{VERSIONES_CLIENTE}}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Usuarios Inactivos -->
            <div id="usuarios-inactivos" class="inactive-users">
                <h4>⚠️ Usuarios que Requieren Atención (No han usado Cursor)</h4>
                <p>Los siguientes usuarios no han registrado actividad y podrían beneficiarse de formación o soporte adicional:</p>
                <ul>
                    {{USUARIOS_INACTIVOS_LISTA}}
                </ul>
                <p><strong>Recomendación:</strong> Contacto personalizado para identificar barreras y ofrecer formación específica.</p>
            </div>

            <!-- Sección para Dirección -->
            <div id="resumen-ejecutivo" class="section">
                <h2 class="section-title">🎯 Resumen Ejecutivo</h2>
                <p style="text-align: center; margin-bottom: 30px; color: #6c757d;">
                    Indicadores clave del retorno de inversión y progreso en la transformación digital de los equipos de desarrollo.
                </p>
                
                <div class="insight-item">
                    <h4>🚀 Adopción Excepcional</h4>
                    <p>{{TASA_ADOPCION}}% de adopción supera significativamente los estándares del sector. Demuestra una gestión del cambio exitosa y alta percepción de valor por parte de los equipos.</p>
                </div>
                
                <div class="insight-item">
                    <h4>🔬 Innovación Tecnológica</h4>
                    <p>Uso diversificado de múltiples modelos de IA evidencia una cultura de experimentación e innovación consolidada en los equipos técnicos.</p>
                </div>
                
                <div class="insight-item">
                    <h4>📊 Impacto Mensurable</h4>
                    <p>Tasa de aceptación del {{TASA_ACEPTACION}}% indica alta calidad en las sugerencias de IA. El promedio de {{PROMEDIO_LINEAS}} líneas por usuario activo demuestra adopción real y efectiva.</p>
                </div>
            </div>

            <!-- Recomendaciones Estratégicas -->
            <div id="recomendaciones" class="recommendations">
                <h3>🎯 Recomendaciones Estratégicas</h3>
                <ul class="recommendation-list">
                    {{RECOMENDACIONES_ESTRATEGICAS}}
                </ul>
            </div>

            <!-- Footer -->
            <div style="text-align: center; padding: 30px; color: #7f8c8d; border-top: 1px solid #ecf0f1; margin-top: 40px;">
                <p>📋 Informe generado automáticamente • 🤖 Powered by Cursor AI Analytics • 📅 Última actualización: {{FECHA_GENERACION}}</p>
                <p>Para más información contacta con el equipo de transformación digital</p>
            </div>
        </div>
    </div>

    <script>
        // Configuración global de Chart.js
        Chart.defaults.font.family = "'Segoe UI', Tahoma, Geneva, Verdana, sans-serif";
        Chart.defaults.font.size = 12;
        Chart.defaults.color = '#666';

        // Gráfico de Evolución Temporal
        const evolutionCtx = document.getElementById('evolutionChart').getContext('2d');
        const evolutionChart = new Chart(evolutionCtx, {
            type: 'line',
            data: {
                labels: {{CHART_EVOLUTION_LABELS}},
                datasets: [{
                    label: 'Líneas Aceptadas',
                    data: {{CHART_EVOLUTION_ACCEPTED}},
                    borderColor: '#3498db',
                    backgroundColor: 'rgba(52, 152, 219, 0.1)',
                    borderWidth: 3,
                    fill: true,
                    tension: 0.4,
                    pointBackgroundColor: '#3498db',
                    pointBorderColor: '#fff',
                    pointBorderWidth: 2,
                    pointRadius: 4
                }, {
                    label: 'Líneas Sugeridas',
                    data: {{CHART_EVOLUTION_SUGGESTED}},
                    borderColor: '#e74c3c',
                    backgroundColor: 'rgba(231, 76, 60, 0.1)',
                    borderWidth: 2,
                    fill: false,
                    tension: 0.4,
                    pointBackgroundColor: '#e74c3c',
                    pointBorderColor: '#fff',
                    pointBorderWidth: 2,
                    pointRadius: 3,
                    borderDash: [5, 5]
                }, {
                    label: 'Usuarios Activos',
                    data: {{CHART_EVOLUTION_USERS}},
                    borderColor: '#27ae60',
                    backgroundColor: 'rgba(39, 174, 96, 0.1)',
                    borderWidth: 3,
                    fill: false,
                    tension: 0.4,
                    pointBackgroundColor: '#27ae60',
                    pointBorderColor: '#fff',
                    pointBorderWidth: 2,
                    pointRadius: 4,
                    yAxisID: 'y1'
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: true,
                        position: 'top'
                    },
                    tooltip: {
                        backgroundColor: 'rgba(0, 0, 0, 0.8)',
                        titleColor: '#fff',
                        bodyColor: '#fff',
                        borderColor: '#3498db',
                        borderWidth: 1
                    }
                },
                scales: {
                    y: {
                        type: 'linear',
                        display: true,
                        position: 'left',
                        beginAtZero: true,
                        grid: {
                            color: 'rgba(0, 0, 0, 0.1)'
                        },
                        ticks: {
                            callback: function(value) {
                                return value.toLocaleString('es-ES');
                            }
                        }
                    },
                    y1: {
                        type: 'linear',
                        display: true,
                        position: 'right',
                        beginAtZero: true,
                        grid: {
                            drawOnChartArea: false,
                        },
                    },
                    x: {
                        grid: {
                            color: 'rgba(0, 0, 0, 0.1)'
                        }
                    }
                }
            }
        });

        // Gráfico de Modelos de IA
        const modelsCtx = document.getElementById('modelsChart').getContext('2d');
        new Chart(modelsCtx, {
            type: 'doughnut',
            data: {
                labels: {{CHART_MODELS_LABELS}},
                datasets: [{
                    data: {{CHART_MODELS_DATA}},
                    backgroundColor: [
                        '#3498db',
                        '#2ecc71',
                        '#9b59b6',
                        '#e74c3c',
                        '#f39c12',
                        '#1abc9c',
                        '#95a5a6'
                    ],
                    borderWidth: 2,
                    borderColor: '#fff'
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom',
                        labels: {
                            padding: 20,
                            usePointStyle: true
                        }
                    },
                    tooltip: {
                        backgroundColor: 'rgba(0, 0, 0, 0.8)',
                        titleColor: '#fff',
                        bodyColor: '#fff',
                        callbacks: {
                            label: function(context) {
                                return context.label + ': ' + context.parsed + '%';
                            }
                        }
                    }
                }
            }
        });

        // Gráfico de Evolución de Tabs
        const tabsCtx = document.getElementById('tabsChart').getContext('2d');
        new Chart(tabsCtx, {
            type: 'line',
            data: {
                labels: {{CHART_EVOLUTION_LABELS}},
                datasets: [{
                    label: 'Tabs Aceptados',
                    data: {{CHART_TABS_ACCEPTED}},
                    borderColor: '#9b59b6',
                    backgroundColor: 'rgba(155, 89, 182, 0.1)',
                    borderWidth: 3,
                    fill: true,
                    tension: 0.4,
                    pointBackgroundColor: '#9b59b6',
                    pointBorderColor: '#fff',
                    pointBorderWidth: 2,
                    pointRadius: 4
                }, {
                    label: 'Tabs Mostrados',
                    data: {{CHART_TABS_SHOWN}},
                    borderColor: '#f39c12',
                    backgroundColor: 'rgba(243, 156, 18, 0.1)',
                    borderWidth: 2,
                    fill: false,
                    tension: 0.4,
                    pointBackgroundColor: '#f39c12',
                    pointBorderColor: '#fff',
                    pointBorderWidth: 2,
                    pointRadius: 3,
                    borderDash: [5, 5]
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: true,
                        position: 'top'
                    },
                    tooltip: {
                        backgroundColor: 'rgba(0, 0, 0, 0.8)',
                        titleColor: '#fff',
                        bodyColor: '#fff',
                        borderColor: '#9b59b6',
                        borderWidth: 1
                    }
                },
                scales: {
                    y: {
                        type: 'linear',
                        display: true,
                        beginAtZero: true,
                        grid: {
                            color: 'rgba(0, 0, 0, 0.1)'
                        },
                        ticks: {
                            callback: function(value) {
                                return value.toLocaleString('es-ES');
                            }
                        }
                    },
                    x: {
                        grid: {
                            color: 'rgba(0, 0, 0, 0.1)'
                        }
                    }
                }
            }
        });

        // Funcionalidad del menú desplegable
        const menuToggle = document.getElementById('menuToggle');
        const menuDropdown = document.getElementById('menuDropdown');
        const menuOverlay = document.getElementById('menuOverlay');

        function toggleMenu() {
            menuToggle.classList.toggle('active');
            menuDropdown.classList.toggle('active');
            menuOverlay.classList.toggle('active');
        }

        function closeMenu() {
            menuToggle.classList.remove('active');
            menuDropdown.classList.remove('active');
            menuOverlay.classList.remove('active');
        }

        // Event listeners
        menuToggle.addEventListener('click', toggleMenu);
        menuOverlay.addEventListener('click', closeMenu);

        // Cerrar menú al hacer clic en un enlace
        const menuLinks = menuDropdown.querySelectorAll('a');
        menuLinks.forEach(link => {
            link.addEventListener('click', closeMenu);
        });

        // Cerrar menú con tecla Escape
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeMenu();
            }
        });
    </script>
</body>
</html>